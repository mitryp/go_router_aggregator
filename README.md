# go_router_aggregator

A builder to leverage GoRouter’s type-safe routes by cleanly separating route declarations from your router
configuration, aggregating all generated $appRoutes into a single importable file.
This is a workaround for [flutter/flutter#122258](https://github.com/flutter/flutter/issues/122258) that automatically
merges all your generated GoRouter `$appRoutes` getters into a single file.

---

## Features

- **Automatic aggregation**: Detects every `$appRoutes` in your generated files and consolidates them into a
  single `$aggregatedRoutes` collection.
- **Configurable output path**: Control where the final routes file is generated via builder options.

---

## Installation

Add the plugin and its dependencies to your project:

```yaml
flutter pub add dev:build_runner dev:go_router_aggregator
```

---

## Configuration

Use `global_options` in your project’s `build.yaml` (next to `pubspec.yaml`) to change the output location:

```yaml
global_options:
  go_router_aggregator|aggregate_app_routes:
    options:
      # Path relative to lib/ where the file will be generated
      output: "navigation/app_routes.g.dart"
```

By default, output will be written to `lib/routes.g.dart`.

---

## Usage

1. Define your routes using GoRouter code generation (e.g. `@TypedGoRoute`, `@TypedShellRoute`) in any files it's
   convenient for you (for example, together with your widgets).

2. Run the build:
   ```bash
   dart run build_runner build -d
   ```

   Alternatively, start the file watcher:
   ```bash
   dart run build_runner watch -d
   ```

3. Import the path you set in build.yaml (or `lib/routes.g.dart` by default) and use the `$aggregatedRoutes` in your router:
   ```dart
   import 'navigation/app_routes.g.dart';

   final router = GoRouter(
     initialLocation: const HomeRoute().location,
     routes: $aggregatedRoutes, // generated RouteBase list
   );

---

## Example Builder Output

```dart
// lib/navigation/app_routes.g.dart

// GENERATED by go_router_aggregator - do NOT edit by hand - contents will be overridden
// ignore_for_file: type=lint
import 'package:go_router/go_router.dart';

import 'package:my_app/features/home/home_page.dart' as _home_page0;
import 'package:my_app/features/settings/settings_page.dart' as _settings_page0;

List<RouteBase> get $aggregatedRoutes => [
  ..._home_page0.$appRoutes,
  ..._settings_page0.$appRoutes,
];
```

